# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
  sonarqube: clicklogiq/sonarqube@1.0.1
 
# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  say-hello-workflow:
    jobs:
      - sonarqube/analyze
            parameters:
              organization:
                type: env_var_name
                default: SONARQUBE_SERVER_ORGANIZATION
              host_url:
                type: env_var_name
                default: SONARQUBE_SERVER_URL
              login:
                type: env_var_name
                default: SONARQUBE_SERVER_LOGIN
              projectKey:
                type: env_var_name
                default: CIRCLE_PROJECT_REPONAME
              projectVersion:
                type: env_var_name
                default: CIRCLE_BUILD_NUM
              github_oauth:
                type: env_var_name
                default: SONARQUBE_GITHUB_OAUTH
              github_repository:
                type: env_var_name
                default: SONARQUBE_SERVER_ORGANIZATION
              github_pullRequest:
                type: env_var_name
                default: CIRCLECI_PULL_REQUEST_NUMBER


